<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>kubectl - Dejavu</title>
<meta name="description" content="Personal notes and snippets I keep forgetting">
<meta name="generator" content="Hugo 0.81.0-DEV" />
<link href="falcosuessgott.github.io/dejavu/index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="falcosuessgott.github.io/dejavu/kubernetes/kubectl/">
<link rel="stylesheet" href="falcosuessgott.github.io/dejavu/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="falcosuessgott.github.io/dejavu/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script src="falcosuessgott.github.io/dejavu/js/bundle.js"></script><style>
:root {}
</style>
<meta property="og:title" content="kubectl" />
<meta property="og:description" content="Kubernetes  kubectl  apply changes create objects get multiple objects delete all pods in certain namespace   ooa General  Required Ports control plane Worker Nodes etcd ports default manifest yml get possible defintion options version differences auto generate a manifest   kubectl via ssh jump host Pods  Default Pod ressources create and expose a pod Static Pod   ReplicaSet  update replicaset   Deployments  Create Deployment and scale it   Maintenance  drain a node mark a node as unscheduable   DaemonSets Namespace  get all namespaces change namespace   Service  expose a pod on a specific port Types   DNS  CoreDNS FQDN   etcd Taint &amp; Tolerations  add taint to node remove taint of node tolerant specification   Upgrade  prepare node for upgrades using kubeadm       apply changes kubectl apply -f file." />
<meta property="og:type" content="article" />
<meta property="og:url" content="falcosuessgott.github.io/dejavu/kubernetes/kubectl/" />
<meta property="og:image" content="falcosuessgott.github.io/dejavu/images/og-image.png"/>
<meta property="article:published_time" content="2017-10-17T15:26:15+00:00" />
<meta property="article:modified_time" content="2017-10-17T15:26:15+00:00" /><meta property="og:site_name" content="Dejavu" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="falcosuessgott.github.io/dejavu/images/og-image.png"/>

<meta name="twitter:title" content="kubectl"/>
<meta name="twitter:description" content="Kubernetes  kubectl  apply changes create objects get multiple objects delete all pods in certain namespace   ooa General  Required Ports control plane Worker Nodes etcd ports default manifest yml get possible defintion options version differences auto generate a manifest   kubectl via ssh jump host Pods  Default Pod ressources create and expose a pod Static Pod   ReplicaSet  update replicaset   Deployments  Create Deployment and scale it   Maintenance  drain a node mark a node as unscheduable   DaemonSets Namespace  get all namespaces change namespace   Service  expose a pod on a specific port Types   DNS  CoreDNS FQDN   etcd Taint &amp; Tolerations  add taint to node remove taint of node tolerant specification   Upgrade  prepare node for upgrades using kubeadm       apply changes kubectl apply -f file."/>
<meta itemprop="name" content="kubectl">
<meta itemprop="description" content="Kubernetes  kubectl  apply changes create objects get multiple objects delete all pods in certain namespace   ooa General  Required Ports control plane Worker Nodes etcd ports default manifest yml get possible defintion options version differences auto generate a manifest   kubectl via ssh jump host Pods  Default Pod ressources create and expose a pod Static Pod   ReplicaSet  update replicaset   Deployments  Create Deployment and scale it   Maintenance  drain a node mark a node as unscheduable   DaemonSets Namespace  get all namespaces change namespace   Service  expose a pod on a specific port Types   DNS  CoreDNS FQDN   etcd Taint &amp; Tolerations  add taint to node remove taint of node tolerant specification   Upgrade  prepare node for upgrades using kubeadm       apply changes kubectl apply -f file.">
<meta itemprop="datePublished" content="2017-10-17T15:26:15+00:00" />
<meta itemprop="dateModified" content="2017-10-17T15:26:15+00:00" />
<meta itemprop="wordCount" content="182">
<meta itemprop="image" content="falcosuessgott.github.io/dejavu/images/og-image.png"/>



<meta itemprop="keywords" content="" />
</head>
<body><div class="container"><header>
<h1>Dejavu</h1><a href="https://github.com/FalcoSuessgott/dejavu" class="github"><i class="fab fa-github"></i></a>
<p class="description">Personal notes and snippets I keep forgetting</p>

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="falcosuessgott.github.io/dejavu/">Wiki</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>kubectl</h1>
<!--ts-->
<ul>
<li><a href="#kubernetes">Kubernetes</a>
<ul>
<li><a href="#kubectl">kubectl</a>
<ul>
<li><a href="#apply-changes">apply changes</a></li>
<li><a href="#create-objects">create objects</a></li>
<li><a href="#get-multiple-objects">get multiple objects</a></li>
<li><a href="#delete-all-pods-in-certain-namespace">delete all pods in certain namespace</a></li>
</ul>
</li>
<li><a href="#ooa">ooa</a></li>
<li><a href="#general">General</a>
<ul>
<li><a href="#required-ports-control-plane">Required Ports control plane</a></li>
<li><a href="#worker-nodes">Worker Nodes</a></li>
<li><a href="#etcd-ports">etcd ports</a></li>
<li><a href="#default-manifest-yml">default manifest yml</a></li>
<li><a href="#get-possible-defintion-options">get possible defintion options</a></li>
<li><a href="#version-differences">version differences</a></li>
<li><a href="#auto-generate-a-manifest">auto generate a manifest</a></li>
</ul>
</li>
<li><a href="#kubectl-via-ssh-jump-host">kubectl via ssh jump host</a></li>
<li><a href="#pods">Pods</a>
<ul>
<li><a href="#default-pod-ressources">Default Pod ressources</a></li>
<li><a href="#create-and-expose-a-pod">create and expose a pod</a></li>
<li><a href="#static-pod">Static Pod</a></li>
</ul>
</li>
<li><a href="#replicaset">ReplicaSet</a>
<ul>
<li><a href="#update-replicaset">update replicaset</a></li>
</ul>
</li>
<li><a href="#deployments">Deployments</a>
<ul>
<li><a href="#create-deployment-and-scale-it">Create Deployment and scale it</a></li>
</ul>
</li>
<li><a href="#maintenance">Maintenance</a>
<ul>
<li><a href="#drain-a-node">drain a node</a></li>
<li><a href="#mark-a-node-as-unscheduable">mark a node as unscheduable</a></li>
</ul>
</li>
<li><a href="#daemonsets">DaemonSets</a></li>
<li><a href="#namespace">Namespace</a>
<ul>
<li><a href="#get-all-namespaces">get all namespaces</a></li>
<li><a href="#change-namespace">change namespace</a></li>
</ul>
</li>
<li><a href="#service">Service</a>
<ul>
<li><a href="#expose-a-pod-on-a-specific-port">expose a pod on a specific port</a></li>
<li><a href="#types">Types</a></li>
</ul>
</li>
<li><a href="#dns">DNS</a>
<ul>
<li><a href="#coredns">CoreDNS</a></li>
<li><a href="#fqdn">FQDN</a></li>
</ul>
</li>
<li><a href="#etcd">etcd</a></li>
<li><a href="#taint--tolerations">Taint &amp; Tolerations</a>
<ul>
<li><a href="#add-taint-to-node">add taint to node</a></li>
<li><a href="#remove-taint-of-node">remove taint of node</a></li>
<li><a href="#tolerant-specification">tolerant specification</a></li>
</ul>
</li>
<li><a href="#upgrade">Upgrade</a>
<ul>
<li><a href="#prepare-node-for-upgrades">prepare node for upgrades</a></li>
<li><a href="#using-kubeadm">using kubeadm</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Added by: morelly_t1, at: Thu 21 Jan 2021 10:14:27 PM CET -->
<!--te-->
<h3 id="apply-changes">apply changes</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f file.yml
</code></pre></div><h3 id="create-objects">create objects</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl create -f file.yml
</code></pre></div><h3 id="get-multiple-objects">get multiple objects</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl get pods,svc,pvc,pv
</code></pre></div><h3 id="delete-all-pods-in-certain-namespace">delete all pods in certain namespace</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">for</span> pod in <span style="color:#66d9ef">$(</span>kubectl get pods --template <span style="color:#e6db74">&#39;{{range .items}}{{.metadata.name}}{{&#34;\n&#34;}}{{end}}&#39;</span> -n flux<span style="color:#66d9ef">)</span>; <span style="color:#66d9ef">do</span> kubectl delete pod $pod -n flux; <span style="color:#66d9ef">done</span>
</code></pre></div><h3 id="kubectl-via-ssh-jump-host">kubectl via ssh jump host</h3>
<ul>
<li>cp .kube/config to local machine</li>
<li>change server to localhost:6443</li>
<li>add insecure-skip-tls-verify: true in cluster</li>
<li>remove cert</li>
<li>ssh 10.25.112.158 -i priv_key -L 6443:localhost:6443</li>
</ul>
<div class="edit-meta">
Last updated on 17 Oct 2017


<br>
Published on 17 Oct 2017
<br></div><nav class="pagination"><a class="nav nav-prev" href="falcosuessgott.github.io/dejavu/kubernetes/kubernetes/" title="General"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - General</a>
<a class="nav nav-next" href="falcosuessgott.github.io/dejavu/linux/" title="Linux">Next - Linux <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main>
<div class="sidebar">

<nav class="open-menu">
<ul>
<li class=""><a href="falcosuessgott.github.io/dejavu">Home</a></li>

<li class=""><a href="falcosuessgott.github.io/dejavu/ansible/">Ansible</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/ansible/ansible/">General</a></li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/bash/">Bash</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/bash/bash/">General</a></li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/container/">Container</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/container/docker/">Docker</a></li>
<li class=""><a href="falcosuessgott.github.io/dejavu/container/podman/">Podman</a></li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/git/">Git</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/git/git/">General</a></li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/go/">Go</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/go/go/">General</a></li>
</ul>
  
</li>

<li class="parent"><a href="falcosuessgott.github.io/dejavu/kubernetes/">Kubernetes</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/kubernetes/etcd/">etcd</a></li>
<li class=""><a href="falcosuessgott.github.io/dejavu/kubernetes/kubernetes/">General</a></li>
<li class="active"><a href="falcosuessgott.github.io/dejavu/kubernetes/kubectl/">kubectl</a></li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/linux/">Linux</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/linux/linux/">General</a></li>

<li class=""><a href="falcosuessgott.github.io/dejavu/linux/rhel/">RHEL</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/linux/rhel/rhel/">General</a></li>
<li class=""><a href="falcosuessgott.github.io/dejavu/linux/rhel/rpm/">RPM</a></li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/python/">Python</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/python/python/">General</a></li>
</ul>
  
</li>

<li class=""><a href="falcosuessgott.github.io/dejavu/vim/">vim</a>
  
<ul class="sub-menu">
<li class=""><a href="falcosuessgott.github.io/dejavu/vim/vim/">General</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>

</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
